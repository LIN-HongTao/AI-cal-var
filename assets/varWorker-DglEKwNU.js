(function(){"use strict";function y(t){if(Math.abs(t-.95)<1e-6)return 1.645;if(Math.abs(t-.99)<1e-6)return 2.33;const o=[2.50662823884,-18.61500062529,41.39119773534,-25.44106049637],s=[-8.4735109309,23.08336743743,-21.06224101826,3.13082909833],e=[.3374754822726147,.9761690190917186,.1607979714918209,.0276438810333863,.0038405729373609,.0003951896511919,321767881768e-16,2888167364e-16,3960315187e-16],n=t-.5;if(Math.abs(n)<.42){const a=n*n,c=n*(((o[3]*a+o[2])*a+o[1])*a+o[0]),u=(((s[3]*a+s[2])*a+s[1])*a+s[0])*a+1;return c/u}let r=n<=0?t:1-t;r=Math.log(-Math.log(r));let l=e[0];for(let a=1;a<e.length;a++)l+=e[a]*Math.pow(r,a);return n>0?l:-l}function p(t){let o=0;for(const s of t)o+=s;return o/t.length}function q(t){const o=p(t);let s=0;for(const e of t){const n=e-o;s+=n*n}return Math.sqrt(s/(t.length-1))}function I(t,o){function s(r){const a=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.log(Math.PI)-Math.log(Math.sin(Math.PI*r))-s(1-r);r-=1;let c=a[0];for(let i=1;i<a.length;i++)c+=a[i]/(r+i);const u=r+7+.5;return .5*Math.log(2*Math.PI)+(r+.5)*Math.log(u)-u+Math.log(c)}const e=s((o+1)/2)-s(o/2)-.5*Math.log(o*Math.PI);let n=0;for(const r of t)n+=e-(o+1)/2*Math.log(1+r*r/o);return n}function P(t,o=3,s=60){const e=p(t),n=q(t);if(n<=0)return 5;const r=t.map(c=>(c-e)/n);let l=o,a=-1e100;for(let c=o;c<=s;c++){const u=I(r,c);u>a&&(a=u,l=c)}return l}function b(){let t=0,o=0;for(;t===0;)t=Math.random();for(;o===0;)o=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*o)}function k(t){if(t<1){const e=Math.random();return k(1+t)*Math.pow(e,1/t)}const o=t-1/3,s=1/Math.sqrt(9*o);for(;;){let e=b(),n=1+s*e;if(n<=0)continue;n=n*n*n;const r=Math.random();if(r<1-.0331*(e*e)*(e*e)||Math.log(r)<.5*e*e+o*(1-n+Math.log(n)))return o*n}}function F(t){return 2*k(t/2)}function L(t){const o=b(),s=F(t);return o/Math.sqrt(s/t)}function w(t,o){const s=[...t].sort((l,a)=>l-a),e=(s.length-1)*o,n=Math.floor(e),r=e-n;return s[n+1]!==void 0?s[n]+r*(s[n+1]-s[n]):s[n]}self.onmessage=t=>{const{task:o,payload:s}=t.data;if(o==="mcSingle"){const{r:e,conf:n,T:r,sims:l,method:a,dfMax:c}=s,u=1-n;if(e.length<2){self.postMessage({ok:!0,var:NaN});return}const i=p(e),m=q(e);if(a==="normal"){const f=new Float64Array(l);for(let h=0;h<l;h++){let g=0;for(let M=0;M<r;M++)g+=i+m*b();f[h]=g}const d=-w(f,u);self.postMessage({ok:!0,var:d,mu:i,sigma:m});return}if(a==="t_mc"){const f=P(e,3,c),d=f>2?m*Math.sqrt((f-2)/f):m,h=new Float64Array(l);for(let M=0;M<l;M++){let v=0;for(let x=0;x<r;x++)v+=i+d*L(f);h[M]=v}const g=-w(h,u);self.postMessage({ok:!0,var:g,mu:i,sigma:m,nu:f,z:y(n)});return}if(a==="bootstrap"){const f=new Float64Array(l);for(let h=0;h<l;h++){let g=0;for(let M=0;M<r;M++){const v=Math.random()*e.length|0;g+=e[v]}f[h]=g}const d=-w(f,u);self.postMessage({ok:!0,var:d});return}}}})();
